{% extends "dashboard/base.html" %}

{% block head_title %} Homepage - {{ block.super }} {% endblock head_title%}

{% block content %}
<p class="text-blue-500 pt-5 font-bold text-lg text-center">Authorizations :</p>

<div class="pt-5 flex justify-center space-x-20">
    <div class="flex flex-col items-center space-y-4">
        <p class="text-blue-500 font-bold text-lg">Payment :</p>
        <div class="flex items-center space-x-4">
            <p class="bg-gray-800 text-white text-lg p-2 rounded-full">Paypal</p>
            <button class="bg-red-500 text-white text-lg p-2 rounded-full">Connect</button>
        </div>
        <div class="flex items-center space-x-4">
            <p class="bg-gray-800 text-white text-lg p-2 rounded-full">Stripe</p>
            <button class="bg-red-500 text-white text-lg p-2 rounded-full">Connect</button>
        </div>
        <div class="flex items-center space-x-4">
            <p class="bg-gray-800 text-white text-lg p-2 rounded-full">Binance</p>
            <button class="bg-red-500 text-white text-lg p-2 rounded-full">Connect</button>
        </div>
        <div class="flex items-center space-x-4">
            <p class="bg-gray-800 text-white text-lg p-2 rounded-full">Coinbase</p>
            <button class="bg-red-500 text-white text-lg p-2 rounded-full">Connect</button>
        </div>
    </div>

    <div class="flex flex-col items-center space-y-4">
        <p class="text-blue-500 font-bold text-lg">Discord Accounts :</p>
        <div class="flex items-center space-x-4">
            <button id="add-discord" class="bg-gray-800 text-white text-lg p-2 border-2 border-gray-400 rounded-full"> + </button>
        </div>
        {% for discord_token in discord_tokens %}
        <div class="flex items-center space-x-4">
            <p class="bg-gray-800 text-white text-lg p-2 rounded-full">{{ discord_token.username }}</p>
            <p class="text-green-500 text-lg">Connected</p>
            <button onclick="location.href='{% url 'delete_discord_token' discord_token.id %}'" class="bg-red-500 text-white text-lg p-2 rounded-full">Delete</button>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Modal -->
<div id="token-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-5 rounded-lg">
        <h2 class="text-xl font-bold mb-4">Enter Discord Token</h2>
        <form method="POST" action="{% url 'auths' %}">
            {% csrf_token %}
            <input id="token-input" type="text" name="token" class="border-2 border-gray-300 p-2 w-full" placeholder="Enter your token">
            <div class="flex justify-end space-x-4 mt-4">
                <button type="submit" class="bg-blue-500 text-white p-2 rounded">Submit</button>
                <button type="button" id="close-modal" class="bg-gray-500 text-white p-2 rounded">Close</button>
            </div>
        </form>
    </div>
</div>

<script>
document.getElementById('add-discord').addEventListener('click', function() {
    var tokenModal = document.getElementById('token-modal');
    var addButton = document.getElementById('add-discord');
    
    if (tokenModal.classList.contains('hidden')) {
        tokenModal.classList.remove('hidden');
        addButton.textContent = ' - ';
    } else {
        tokenModal.classList.add('hidden');
        addButton.textContent = ' + ';
    }
});

document.getElementById('close-modal').addEventListener('click', function() {
    document.getElementById('token-modal').classList.add('hidden');
    document.getElementById('add-discord').textContent = ' + ';
});
</script>

{% endblock content %}
